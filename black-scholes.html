<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Black-Scholes Option Pricing Calculator - Financial Tools Hub</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="home.html" class="logo">Financial Tools Hub</a>
            <ul class="nav-links">
                <li><a href="home.html">Home</a></li>
                <li><a href="black-scholes.html">Black-Scholes Calculator</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>Black-Scholes Option Pricing Model</h1>
            <p>Calculate option prices using the Black-Scholes formula with real-time graphs and Greeks analysis</p>
        </div>

        <div class="calculator-container">
            <div class="calculator-header">
                <h1>Interactive Option Pricing Calculator</h1>
                <p>Professional-grade calculations with visual analysis</p>
            </div>
            
            <div class="calculator-content">
                <div class="inputs-panel">
                    <h2 style="margin-bottom: 20px; color: #2c3e50;">Input Parameters</h2>
                    
                    <div class="option-type">
                        <input type="radio" id="call" name="optionType" value="call" checked>
                        <label for="call">Call Option</label>
                        <input type="radio" id="put" name="optionType" value="put">
                        <label for="put">Put Option</label>
                    </div>

                    <div class="input-group">
                        <label for="spotPrice">Current Stock Price (S₀)</label>
                        <input type="number" id="spotPrice" value="100" step="0.01" min="0">
                    </div>

                    <div class="input-group">
                        <label for="strikePrice">Strike Price (K)</label>
                        <input type="number" id="strikePrice" value="100" step="0.01" min="0">
                    </div>

                    <div class="input-group">
                        <label for="timeToExpiry">Time to Expiry (T) - Years</label>
                        <input type="number" id="timeToExpiry" value="1" step="0.01" min="0">
                    </div>

                    <div class="input-group">
                        <label for="riskFreeRate">Risk-Free Rate (r) - %</label>
                        <input type="number" id="riskFreeRate" value="5" step="0.01">
                    </div>

                    <div class="input-group">
                        <label for="volatility">Volatility (σ) - %</label>
                        <input type="number" id="volatility" value="20" step="0.01" min="0">
                    </div>

                    <button class="calculate-btn" onclick="calculateAndUpdate()">Calculate Option Price</button>

                    <div class="results" id="results" style="display: none;">
                        <h3>Results</h3>
                        <div class="result-item">
                            <span class="result-label">Option Price:</span>
                            <span class="result-value" id="optionPrice">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Delta:</span>
                            <span class="result-value" id="delta">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Gamma:</span>
                            <span class="result-value" id="gamma">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Theta:</span>
                            <span class="result-value" id="theta">-</span>
                        </div>
                        <div class="result-item">
                            <span class="result-label">Vega:</span>
                            <span class="result-value" id="vega">-</span>
                        </div>
                    </div>
                </div>

                <div class="graphs-panel">
                    <div class="graph-container">
                        <div class="graph-title">Option Price vs Strike Price</div>
                        <div class="chart-container">
                            <canvas id="priceChart"></canvas>
                        </div>
                    </div>

                    <div class="graph-container">
                        <div class="graph-title">Option Greeks vs Strike Price</div>
                        <div class="chart-container">
                            <canvas id="greeksChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Financial Tools Hub. All rights reserved.</p>
            <p>Educational tools for financial analysis and learning.</p>
        </div>
    </footer>

    <script>
        // Black-Scholes functions
        function normalCDF(x) {
            return 0.5 * (1 + erf(x / Math.sqrt(2)));
        }

        function erf(x) {
            const a1 =  0.254829592;
            const a2 = -0.284496736;
            const a3 =  1.421413741;
            const a4 = -1.453152027;
            const a5 =  1.061405429;
            const p  =  0.3275911;

            const sign = x >= 0 ? 1 : -1;
            x = Math.abs(x);

            const t = 1.0 / (1.0 + p * x);
            const y = 1.0 - (((((a5 * t + a4) * t) + a3) * t + a2) * t + a1) * t * Math.exp(-x * x);

            return sign * y;
        }

        function blackScholes(S, K, T, r, sigma, optionType) {
            const d1 = (Math.log(S / K) + (r + 0.5 * sigma * sigma) * T) / (sigma * Math.sqrt(T));
            const d2 = d1 - sigma * Math.sqrt(T);

            let price, delta, gamma, theta, vega;

            if (optionType === 'call') {
                price = S * normalCDF(d1) - K * Math.exp(-r * T) * normalCDF(d2);
                delta = normalCDF(d1);
                theta = (-S * sigma * Math.exp(-d1 * d1 / 2) / (2 * Math.sqrt(2 * Math.PI * T)) - 
                        r * K * Math.exp(-r * T) * normalCDF(d2)) / 365;
            } else {
                price = K * Math.exp(-r * T) * normalCDF(-d2) - S * normalCDF(-d1);
                delta = normalCDF(d1) - 1;
                theta = (-S * sigma * Math.exp(-d1 * d1 / 2) / (2 * Math.sqrt(2 * Math.PI * T)) + 
                        r * K * Math.exp(-r * T) * normalCDF(-d2)) / 365;
            }

            gamma = Math.exp(-d1 * d1 / 2) / (S * sigma * Math.sqrt(T) * Math.sqrt(2 * Math.PI));
            vega = S * Math.sqrt(T) * Math.exp(-d1 * d1 / 2) / Math.sqrt(2 * Math.PI);

            return { price, delta, gamma, theta, vega };
        }

        // Chart instances
        let priceChart, greeksChart;

        function initializeCharts() {
            // Price Chart
            const priceCtx = document.getElementById('priceChart').getContext('2d');
            priceChart = new Chart(priceCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Call Option Price',
                        data: [],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'Put Option Price',
                        data: [],
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Strike Price'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Option Price'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    }
                }
            });

            // Greeks Chart
            const greeksCtx = document.getElementById('greeksChart').getContext('2d');
            greeksChart = new Chart(greeksCtx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'Delta',
                        data: [],
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'Gamma',
                        data: [],
                        borderColor: '#e67e22',
                        backgroundColor: 'rgba(230, 126, 34, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'Theta',
                        data: [],
                        borderColor: '#9b59b6',
                        backgroundColor: 'rgba(155, 89, 182, 0.1)',
                        tension: 0.4
                    }, {
                        label: 'Vega',
                        data: [],
                        borderColor: '#2ecc71',
                        backgroundColor: 'rgba(46, 204, 113, 0.1)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Strike Price'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Greek Value'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    }
                }
            });
        }

        function calculateAndUpdate() {
            const S = parseFloat(document.getElementById('spotPrice').value);
            const K = parseFloat(document.getElementById('strikePrice').value);
            const T = parseFloat(document.getElementById('timeToExpiry').value);
            const r = parseFloat(document.getElementById('riskFreeRate').value) / 100;
            const sigma = parseFloat(document.getElementById('volatility').value) / 100;
            const optionType = document.querySelector('input[name="optionType"]:checked').value;

            // Calculate current option price
            const result = blackScholes(S, K, T, r, sigma, optionType);
            
            // Update results display
            document.getElementById('results').style.display = 'block';
            document.getElementById('optionPrice').textContent = '$' + result.price.toFixed(4);
            document.getElementById('delta').textContent = result.delta.toFixed(4);
            document.getElementById('gamma').textContent = result.gamma.toFixed(6);
            document.getElementById('theta').textContent = result.theta.toFixed(6);
            document.getElementById('vega').textContent = result.vega.toFixed(4);

            // Generate data for charts
            const strikeRange = [];
            const callPrices = [];
            const putPrices = [];
            const deltas = [];
            const gammas = [];
            const thetas = [];
            const vegas = [];

            const minStrike = Math.max(10, S * 0.5);
            const maxStrike = S * 1.5;
            const step = (maxStrike - minStrike) / 50;

            for (let strike = minStrike; strike <= maxStrike; strike += step) {
                strikeRange.push(strike.toFixed(2));
                
                const callResult = blackScholes(S, strike, T, r, sigma, 'call');
                const putResult = blackScholes(S, strike, T, r, sigma, 'put');
                
                callPrices.push(callResult.price);
                putPrices.push(putResult.price);
                deltas.push(callResult.delta);
                gammas.push(callResult.gamma);
                thetas.push(callResult.theta);
                vegas.push(callResult.vega);
            }

            // Update charts
            priceChart.data.labels = strikeRange;
            priceChart.data.datasets[0].data = callPrices;
            priceChart.data.datasets[1].data = putPrices;
            priceChart.update();

            greeksChart.data.labels = strikeRange;
            greeksChart.data.datasets[0].data = deltas;
            greeksChart.data.datasets[1].data = gammas;
            greeksChart.data.datasets[2].data = thetas;
            greeksChart.data.datasets[3].data = vegas;
            greeksChart.update();
        }

        // Initialize charts when page loads
        document.addEventListener('DOMContentLoaded', function() {
            initializeCharts();
            calculateAndUpdate();
        });

        // Add event listeners for real-time updates
        document.querySelectorAll('input').forEach(input => {
            input.addEventListener('input', calculateAndUpdate);
        });

        document.querySelectorAll('input[name="optionType"]').forEach(radio => {
            radio.addEventListener('change', calculateAndUpdate);
        });
    </script>
</body>
</html>
